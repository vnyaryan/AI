{
    "command_group": "az backup protection",
    "description": "Manage protection of your items, enable protection or disable it, or take on-demand backups.",
    "status": "GA",
    "commands": [
        {
            "name": "az backup protection auto-disable-for-azurewl",
            "summary": "Disable auto-protection for the specified protectable item.",
            "syntax": "az backup protection auto-disable-for-azurewl --protectable-item-name\n                                              --protectable-item-type {HANAInstance, SAPHanaDatabase, SAPHanaSystem, SQLAG, SQLDatabase, SQLInstance}\n                                              --resource-group\n                                              --server-name\n                                              --vault-name\n                                              --workload-type {AzureFileShare, MSSQL, SAPHANA, SAPHanaDatabase, SQLDataBase, VM}",
            "required_parameters": [
                "--protectable-item-name",
                "--protectable-item-type",
                "--resource-group -g",
                "--server-name",
                "--vault-name -v",
                "--workload-type"
            ],
            "optional_parameters": [],
            "examples": [
                "az backup protection auto-disable-for-azurewl --resource-group MyResourceGroup --vault-name MyVault  --protectable-item-name ItemName --protectable-item-type SQLInstance --server-name Myserver --workload-type MSSQL"
            ]
        },
        {
            "name": "az backup protection auto-enable-for-azurewl",
            "summary": "Automatically protect all existing unprotected DBs and any DB which will be added later with the given policy.",
            "syntax": "az backup protection auto-enable-for-azurewl --policy-name\n                                             --protectable-item-name\n                                             --protectable-item-type {HANAInstance, SAPHanaDatabase, SAPHanaSystem, SQLAG, SQLDatabase, SQLInstance}\n                                             --resource-group\n                                             --server-name\n                                             --vault-name\n                                             --workload-type {AzureFileShare, MSSQL, SAPHANA, SAPHanaDatabase, SQLDataBase, VM}",
            "required_parameters": [
                "--policy-name -p",
                "--protectable-item-name",
                "--protectable-item-type",
                "--resource-group -g",
                "--server-name",
                "--vault-name -v",
                "--workload-type"
            ],
            "optional_parameters": [],
            "examples": [
                "az backup protection auto-enable-for-azurewl --policy-name MyPolicy --resource-group MyResourceGroup --vault-name MyVault  --protectable-item-name ItemName --protectable-item-type SQLInstance --server-name Myserver --workload-type MSSQL"
            ]
        },
        {
            "name": "az backup protection backup-now",
            "summary": "Perform an on-demand backup of a backed up item.",
            "syntax": "az backup protection backup-now [--backup-management-type {AzureIaasVM, AzureStorage, AzureWorkload}]\n                                [--backup-type]\n                                [--container-name]\n                                [--enable-compression {false, true}]\n                                [--ids]\n                                [--item-name]\n                                [--resource-group]\n                                [--retain-until]\n                                [--subscription]\n                                [--vault-name]\n                                [--workload-type {AzureFileShare, MSSQL, SAPHANA, SAPHanaDatabase, SQLDataBase, VM}]",
            "required_parameters": [],
            "optional_parameters": [
                "--backup-management-type",
                "--backup-type",
                "--container-name -c",
                "--enable-compression",
                "--ids",
                "--item-name -i",
                "--resource-group -g",
                "--retain-until",
                "--subscription",
                "--vault-name -v",
                "--workload-type"
            ],
            "examples": [
                "az backup protection backup-now --container-name MyContainer --item-name MyItem --resource-group MyResourceGroup --retain-until 01-02-2018 --vault-name MyVault --backup-management-type AzureIaasVM"
            ]
        },
        {
            "name": "az backup protection check-vm",
            "summary": "The command returns null/empty if the specified resource is not protected under any Recovery Services vault in the subscription. When configuring backup fails, it may return vault details. If Azure Backup is failing, then look for the corresponding error code in the Common issues section - https://learn.microsoft.com/en-us/azure/backup/backup-azure-vms-troubleshoot#common-issues. If it is protected, the relevant vault details will be returned.",
            "syntax": "az backup protection check-vm [--resource-group]\n                              [--vm]",
            "required_parameters": [],
            "optional_parameters": [
                "--resource-group -g",
                "--vm"
            ],
            "examples": [
                "az backup protection check-vm --resource-group MyResourceGroup --vm myVM"
            ]
        },
        {
            "name": "az backup protection disable",
            "summary": "Stop protecting a backed up item. Can retain the backed up data forever or choose to delete it.",
            "syntax": "az backup protection disable [--backup-management-type {AzureIaasVM, AzureStorage, AzureWorkload}]\n                             [--container-name]\n                             [--delete-backup-data {false, true}]\n                             [--ids]\n                             [--item-name]\n                             [--resource-group]\n                             [--retain-as-per-policy {false, true}]\n                             [--subscription]\n                             [--tenant-id]\n                             [--vault-name]\n                             [--workload-type {AzureFileShare, MSSQL, SAPHANA, SAPHanaDatabase, SQLDataBase, VM}]\n                             [--yes]",
            "required_parameters": [],
            "optional_parameters": [
                "--backup-management-type",
                "--container-name -c",
                "--delete-backup-data",
                "--ids",
                "--item-name -i",
                "--resource-group -g",
                "--retain-as-per-policy --retain-recovery-points-as-per-policy",
                "--subscription",
                "--tenant-id",
                "--vault-name -v",
                "--workload-type",
                "--yes -y"
            ],
            "examples": [
                "az backup protection disable --container-name MyContainer --backup-management-type AzureIaasVM --delete-backup-data false --item-name MyItem --resource-group MyResourceGroup --vault-name MyVault --yes"
            ]
        },
        {
            "name": "az backup protection enable-for-azurefileshare",
            "summary": "Start protecting a previously unprotected Azure File share within an Azure Storage account as per the specified policy to a Recovery services vault.",
            "syntax": "az backup protection enable-for-azurefileshare --azure-file-share\n                                               --policy-name\n                                               --resource-group\n                                               --storage-account\n                                               --vault-name",
            "required_parameters": [
                "--azure-file-share",
                "--policy-name -p",
                "--resource-group -g",
                "--storage-account",
                "--vault-name -v"
            ],
            "optional_parameters": [],
            "examples": [
                "az backup protection enable-for-azurefileshare --policy-name MyPolicy --resource-group MyResourceGroup --vault-name MyVault --storage-account MyStorageAccount --azure-file-share MyAzureFileShare"
            ]
        },
        {
            "name": "az backup protection enable-for-azurewl",
            "summary": "Start protecting a previously unprotected workload within an Azure VM as per the specified policy to a Recovery services vault. Provide the workload details as a protectable item.",
            "syntax": "az backup protection enable-for-azurewl --policy-name\n                                        --protectable-item-name\n                                        --protectable-item-type {HANAInstance, SAPHanaDatabase, SAPHanaSystem, SQLAG, SQLDatabase, SQLInstance}\n                                        --resource-group\n                                        --server-name\n                                        --vault-name\n                                        --workload-type {AzureFileShare, MSSQL, SAPHANA, SAPHanaDatabase, SQLDataBase, VM}",
            "required_parameters": [
                "--policy-name -p",
                "--protectable-item-name",
                "--protectable-item-type",
                "--resource-group -g",
                "--server-name",
                "--vault-name -v",
                "--workload-type"
            ],
            "optional_parameters": [],
            "examples": [
                "az backup protection enable-for-azurewl --policy-name MyPolicy --resource-group MyResourceGroup --vault-name MyVault --protectable-item-name ItemName --protectable-item-type SQLInstance --server-name Myserver --workload-type MSSQL"
            ]
        },
        {
            "name": "az backup protection enable-for-vm",
            "summary": "Start protecting a previously unprotected Azure VM as per the specified policy to a Recovery services vault.",
            "syntax": "az backup protection enable-for-vm --policy-name\n                                   --resource-group\n                                   --vault-name\n                                   --vm\n                                   [--disk-list-setting {exclude, include}]\n                                   [--diskslist]\n                                   [--exclude-all-data-disks {false, true}]",
            "required_parameters": [
                "--policy-name -p",
                "--resource-group -g",
                "--vault-name -v",
                "--vm"
            ],
            "optional_parameters": [
                "--disk-list-setting",
                "--diskslist",
                "--exclude-all-data-disks"
            ],
            "examples": [
                "az backup protection enable-for-vm --policy-name MyPolicy --resource-group MyResourceGroup --vault-name MyVault --vm myVM",
                "az backup protection enable-for-vm \\\n  --resource-group myResourceGroup \\\n  --vault-name myRecoveryServicesVault \\\n  --policy-name DefaultPolicy \\\n  --vm \"$(az vm show -g VMResourceGroup -n MyVm --query id)\""
            ]
        },
        {
            "name": "az backup protection resume",
            "summary": "Resume backup for the associated backup item. Use this to change the policy associated with the backup item.",
            "syntax": "az backup protection resume --policy-name\n                            [--backup-management-type {AzureIaasVM, AzureStorage, AzureWorkload}]\n                            [--container-name]\n                            [--ids]\n                            [--item-name]\n                            [--resource-group]\n                            [--subscription]\n                            [--vault-name]\n                            [--workload-type {AzureFileShare, MSSQL, SAPHANA, SAPHanaDatabase, SQLDataBase, VM}]",
            "required_parameters": [
                "--policy-name -p"
            ],
            "optional_parameters": [
                "--backup-management-type",
                "--container-name -c",
                "--ids",
                "--item-name -i",
                "--resource-group -g",
                "--subscription",
                "--vault-name -v",
                "--workload-type"
            ],
            "examples": [
                "az backup protection resume --vault-name MyVault --resource-group MyResourceGroup --container-name MyContainer --backup-management-type AzureIaasVM --item-name MyItem --policy-name MyPolicy"
            ]
        },
        {
            "name": "az backup protection undelete",
            "summary": "Rehydrate an item from softdeleted state to stop protection with retained data state.",
            "syntax": "az backup protection undelete [--backup-management-type {AzureIaasVM, AzureStorage, AzureWorkload}]\n                              [--container-name]\n                              [--ids]\n                              [--item-name]\n                              [--resource-group]\n                              [--subscription]\n                              [--vault-name]\n                              [--workload-type {AzureFileShare, MSSQL, SAPHANA, SAPHanaDatabase, SQLDataBase, VM}]",
            "required_parameters": [],
            "optional_parameters": [
                "--backup-management-type",
                "--container-name -c",
                "--ids",
                "--item-name -i",
                "--resource-group -g",
                "--subscription",
                "--vault-name -v",
                "--workload-type"
            ],
            "examples": [
                "az backup protection undelete --container-name MyContainer --item-name MyItem --resource-group MyResourceGroup --vault-name MyVault --backup-management-type AzureIaasVM --workload-type VM"
            ]
        },
        {
            "name": "az backup protection update-for-vm",
            "summary": "Update disk exclusion settings associated with a backed up VM item.",
            "syntax": "az backup protection update-for-vm [--container-name]\n                                   [--disk-list-setting {exclude, include, resetexclusionsettings}]\n                                   [--diskslist]\n                                   [--exclude-all-data-disks {false, true}]\n                                   [--ids]\n                                   [--item-name]\n                                   [--resource-group]\n                                   [--subscription]\n                                   [--vault-name]",
            "required_parameters": [],
            "optional_parameters": [
                "--container-name -c",
                "--disk-list-setting",
                "--diskslist",
                "--exclude-all-data-disks",
                "--ids",
                "--item-name -i",
                "--resource-group -g",
                "--subscription",
                "--vault-name -v"
            ],
            "examples": [
                "az backup protection update-for-vm --vault-name MyVault --resource-group MyResourceGroup --container-name MyContainer --item-name MyItem --disk-list-setting exclude --diskslist 1"
            ]
        }
    ]
}