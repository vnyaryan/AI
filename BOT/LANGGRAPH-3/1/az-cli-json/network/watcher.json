{
    "command_group": "az network watcher",
    "description": "Manage the Azure Network Watcher. Network Watcher assists with monitoring and diagnosing conditions at a network scenario level. To learn more visit https://learn.microsoft.com/azure/network-watcher/.",
    "status": "GA",
    "commands": [
        {
            "name": "az network watcher configure",
            "summary": "Configure the Network Watcher service for different regions.",
            "syntax": "az network watcher configure --locations\n                             [--enabled {false, true}]\n                             [--resource-group]\n                             [--tags]",
            "required_parameters": [
                "--locations -l"
            ],
            "optional_parameters": [
                "--enabled",
                "--resource-group -g",
                "--tags"
            ],
            "examples": [
                "az network watcher configure -g NetworkWatcherRG  -l westus --enabled true"
            ]
        },
        {
            "name": "az network watcher list",
            "summary": "List Network Watchers.",
            "syntax": "az network watcher list",
            "required_parameters": [],
            "optional_parameters": [],
            "examples": []
        },
        {
            "name": "az network watcher run-configuration-diagnostic",
            "summary": "Run a configuration diagnostic on a target resource.",
            "syntax": "az network watcher run-configuration-diagnostic --resource\n                                                [--destination]\n                                                [--direction {Inbound, Outbound}]\n                                                [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]\n                                                [--parent]\n                                                [--port]\n                                                [--protocol {TCP, UDP}]\n                                                [--queries]\n                                                [--resource-group]\n                                                [--resource-type {applicationGateways, networkInterfaces, virtualMachines}]\n                                                [--source]",
            "required_parameters": [
                "--resource"
            ],
            "optional_parameters": [
                "--destination",
                "--direction",
                "--no-wait",
                "--parent",
                "--port",
                "--protocol",
                "--queries",
                "--resource-group -g",
                "--resource-type -t",
                "--source"
            ],
            "examples": [
                "az network watcher run-configuration-diagnostic --resource {VM_ID} --direction Inbound --protocol TCP --source 12.11.12.14 --destination 10.1.1.4 --port 12100",
                "az network watcher run-configuration-diagnostic --resource {VM_ID} --queries '[{\"direction\": \"Inbound\", \"protocol\": \"TCP\", \"source\": \"12.11.12.14\", \"destination\": \"10.1.1.4\", \"destinationPort\": \"12100\"}, {\"direction\": \"Inbound\", \"protocol\": \"TCP\", \"source\": \"12.11.12.0/32\", \"destination\": \"10.1.1.4\", \"destinationPort\": \"12100\"}, {\"direction\": \"Outbound\", \"protocol\": \"TCP\", \"source\": \"12.11.12.14\", \"destination\": \"10.1.1.4\", \"destinationPort\": \"12100\"}]'"
            ]
        },
        {
            "name": "az network watcher show-next-hop",
            "summary": "Get information on the `next hop` of a VM.",
            "syntax": "az network watcher show-next-hop --dest-ip\n                                 --source-ip\n                                 --vm\n                                 [--nic]\n                                 [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]\n                                 [--resource-group]",
            "required_parameters": [
                "--dest-ip",
                "--source-ip",
                "--vm"
            ],
            "optional_parameters": [
                "--nic",
                "--no-wait",
                "--resource-group -g"
            ],
            "examples": [
                "az network watcher show-next-hop -g MyResourceGroup --vm MyVm --source-ip 10.0.0.4 --dest-ip 10.1.0.4"
            ]
        },
        {
            "name": "az network watcher show-security-group-view",
            "summary": "Get detailed security information on a VM for the currently configured network security group.",
            "syntax": "az network watcher show-security-group-view --vm\n                                            [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]\n                                            [--resource-group]",
            "required_parameters": [
                "--vm"
            ],
            "optional_parameters": [
                "--no-wait",
                "--resource-group -g"
            ],
            "examples": [
                "az network watcher show-security-group-view -g MyResourceGroup --vm MyVm"
            ]
        },
        {
            "name": "az network watcher show-topology",
            "summary": "Get the network topology of a resource group, virtual network or subnet.",
            "syntax": "az network watcher show-topology [--location]\n                                 [--resource-group]\n                                 [--subnet]\n                                 [--vnet]",
            "required_parameters": [],
            "optional_parameters": [
                "--location -l",
                "--resource-group -g",
                "--subnet",
                "--vnet"
            ],
            "examples": [
                "az network watcher show-topology -g MyResourceGroup"
            ]
        },
        {
            "name": "az network watcher test-connectivity",
            "summary": "Test if a connection can be established between a Virtual Machine and a given endpoint.",
            "syntax": "az network watcher test-connectivity --source-resource\n                                     [--dest-address]\n                                     [--dest-port]\n                                     [--dest-resource]\n                                     [--headers]\n                                     [--method {Get}]\n                                     [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]\n                                     [--protocol {Http, Https, Icmp, Tcp}]\n                                     [--resource-group]\n                                     [--source-port]\n                                     [--valid-status-codes]",
            "required_parameters": [
                "--source-resource"
            ],
            "optional_parameters": [
                "--dest-address",
                "--dest-port",
                "--dest-resource",
                "--headers",
                "--method",
                "--no-wait",
                "--protocol",
                "--resource-group -g",
                "--source-port",
                "--valid-status-codes"
            ],
            "examples": [
                "az network watcher test-connectivity -g MyResourceGroup --source-resource MyVmName1 --dest-resource MyVmName2 --dest-port 80",
                "az network watcher test-connectivity --source-resource MyVmId1 --dest-resource MyVmId2 --dest-port 80"
            ]
        },
        {
            "name": "az network watcher test-ip-flow",
            "summary": "Test IP flow to/from a VM given the currently configured network security group rules.",
            "syntax": "az network watcher test-ip-flow --direction {Inbound, Outbound}\n                                --local\n                                --protocol {TCP, UDP}\n                                --remote\n                                --vm\n                                [--nic]\n                                [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]\n                                [--resource-group]",
            "required_parameters": [
                "--direction",
                "--local",
                "--protocol",
                "--remote",
                "--vm"
            ],
            "optional_parameters": [
                "--nic",
                "--no-wait",
                "--resource-group -g"
            ],
            "examples": [
                "az network watcher test-ip-flow -g MyResourceGroup --direction Outbound --protocol TCP --local 10.0.0.4:* --remote 10.1.0.4:80 --vm MyVm"
            ]
        }
    ]
}