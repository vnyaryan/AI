{
    "command_group": "az eventgrid event-subscription",
    "description": "Manage event subscriptions.",
    "status": "GA",
    "commands": [
        {
            "name": "az eventgrid event-subscription create",
            "summary": "Create a new event subscription.",
            "syntax": "az eventgrid event-subscription create --name\n                                       [--aad-tenant-id]\n                                       [--advanced-filter]\n                                       [--azure-active-directory-application-id-or-uri]\n                                       [--deadletter-endpoint]\n                                       [--deadletter-identity {systemassigned}]\n                                       [--deadletter-identity-endpoint]\n                                       [--delivery-attribute-mapping]\n                                       [--delivery-identity {systemassigned}]\n                                       [--delivery-identity-endpoint]\n                                       [--delivery-identity-endpoint-type {azurefunction, eventhub, hybridconnection, servicebusqueue, servicebustopic, storagequeue, webhook}]\n                                       [--enable-advanced-filtering-on-arrays {false, true}]\n                                       [--endpoint]\n                                       [--endpoint-type]\n                                       [--event-delivery-schema {cloudeventschemav1_0, custominputschema, eventgridschema}]\n                                       [--event-ttl]\n                                       [--expiration-date]\n                                       [--included-event-types]\n                                       [--labels]\n                                       [--max-delivery-attempts]\n                                       [--max-events-per-batch]\n                                       [--preferred-batch-size-in-kilobytes]\n                                       [--qttl]\n                                       [--source-resource-id]\n                                       [--subject-begins-with]\n                                       [--subject-case-sensitive {false, true}]\n                                       [--subject-ends-with]",
            "required_parameters": [
                "--name -n"
            ],
            "optional_parameters": [
                "--aad-tenant-id --azure-active-directory-tenant-id",
                "--advanced-filter",
                "--azure-active-directory-application-id-or-uri",
                "--deadletter-endpoint",
                "--deadletter-identity",
                "--deadletter-identity-endpoint",
                "--delivery-attribute-mapping",
                "--delivery-identity",
                "--delivery-identity-endpoint",
                "--delivery-identity-endpoint-type",
                "--enable-advanced-filtering-on-arrays --enable-af-arr",
                "--endpoint",
                "--endpoint-type",
                "--event-delivery-schema",
                "--event-ttl",
                "--expiration-date",
                "--included-event-types",
                "--labels",
                "--max-delivery-attempts",
                "--max-events-per-batch",
                "--preferred-batch-size-in-kilobytes",
                "--qttl --storage-queue-msg-ttl",
                "--source-resource-id",
                "--subject-begins-with",
                "--subject-case-sensitive",
                "--subject-ends-with"
            ],
            "examples": [
                "az eventgrid event-subscription create --name es1 \\\n    --source-resource-id /subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.EventGrid/topics/topic1 \\\n    --endpoint https://contoso.azurewebsites.net/api/f1?code=code",
                "az eventgrid event-subscription create --name es2 \\\n    --source-resource-id /subscriptions/{SubID} \\\n    --endpoint https://contoso.azurewebsites.net/api/f1?code=code",
                "az eventgrid event-subscription create --name es3 \\\n    --source-resource-id /subscriptions/{SubID}/resourceGroups/{RG} \\\n    --endpoint https://contoso.azurewebsites.net/api/f1?code=code",
                "az eventgrid event-subscription create --name es3 \\\n    --source-resource-id \"/subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.Storage/storageaccounts/s1\"  \\\n    --endpoint https://contoso.azurewebsites.net/api/f1?code=code",
                "az eventgrid event-subscription create  --name es3 \\\n    --source-resource-id \"/subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.Storage/storageaccounts/s1\" \\\n    --endpoint https://contoso.azurewebsites.net/api/f1?code=code\n    --advanced-filter data.blobType StringIn BlockBlob\n    --advanced-filter data.url StringBeginsWith https://myaccount.blob.core.windows.net",
                "az eventgrid event-subscription create --name es4 \\\n    --source-resource-id /subscriptions/{SubID} \\\n    --endpoint https://contoso.azurewebsites.net/api/f1?code=code \\\n    --subject-begins-with mysubject_prefix",
                "az eventgrid event-subscription create --name es5 \\\n    --source-resource-id /subscriptions/{SubID}/resourceGroups/{RG} \\\n    --endpoint https://contoso.azurewebsites.net/api/f1?code=code \\\n    --subject-ends-with mysubject_suffix",
                "az eventgrid event-subscription create --name es2 \\\n    --source-resource-id /subscriptions/{SubID} \\\n    --endpoint-type eventhub \\\n    --endpoint /subscriptions/{SubID}/resourceGroups/TestRG/providers/Microsoft.EventHub/namespaces/n1/eventhubs/EH1",
                "az eventgrid event-subscription create --name es2 \\\n    --source-resource-id /subscriptions/{SubID} \\\n    --endpoint-type storagequeue \\\n    --endpoint /subscriptions/{SubID}/resourceGroups/TestRG/providers/Microsoft.Storage/storageAccounts/sa1/queueservices/default/queues/q1",
                "az eventgrid event-subscription create --name es2 \\\n    --source-resource-id /subscriptions/{SubID} \\\n    --endpoint-type servicebusqueue \\\n    --endpoint /subscriptions/{SubID}/resourceGroups/TestRG/providers/Microsoft.ServiceBus/namespaces/ns1/queues/queue1",
                "az eventgrid event-subscription create --name es2 \\\n    --source-resource-id /subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.EventGrid/domains/d1 \\\n    --endpoint https://contoso.azurewebsites.net/api/f1?code=code \\\n    --event-delivery-schema cloudeventschemav1_0",
                "az eventgrid event-subscription create --name es2 \\\n    --source-resource-id \"/subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.Storage/storageaccounts/s1\" \\\n    --endpoint https://contoso.azurewebsites.net/api/f1?code=code \\\n    --deadletter-endpoint /subscriptions/{SubID}/resourceGroups/TestRG/providers/Microsoft.Storage/storageAccounts/s2/blobServices/default/containers/blobcontainer1 \\\n    --max-delivery-attempts 10 --event-ttl 120",
                "az eventgrid event-subscription create --name es2 \\\n    --source-resource-id \"/subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.EventGrid/domains/domain1/topics/t1\" \\\n    --endpoint https://contoso.azurewebsites.net/api/f1?code=code",
                "az eventgrid event-subscription create --name es2 \\\n    --source-resource-id \"/subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.Storage/storageaccounts/sa1\" \\\n    --endpoint https://contoso.azurewebsites.net/api/f1?code=code\n    --expiration-date \"2018-10-31\"",
                "az eventgrid event-subscription create --name es1 \\\n    --source-resource-id /subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.EventGrid/topics/topic1 \\\n    --endpoint https://contoso.azurewebsites.net/api/f1?code=code\n    --azure-active-directory-tenant-id azureactivedirectorytenantid\n    --azure-active-directory-application-id-or-uri azureactivedirectoryapplicationidoruri",
                "az eventgrid event-subscription create --name es1 \\\n    --source-resource-id /subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.EventGrid/topics/topic1 \\\n    --endpoint /subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.Web/sites/{functionappname}/functions/{functionname} --endpoint-type azurefunction",
                "az eventgrid event-subscription create --source-resource-id /subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.EventGrid/topics/topic1 \\\n    --delivery-identity-endpoint-type eventhub --delivery-identity systemassigned --delivery-identity-endpoint /subscriptions/{SubId2|}/resourceGroups/{RG2}/providers/Microsoft.eventhub/namespaces/{EventHubNamespace}/eventhubs/{EventhubName} \\\n    --deadletter-identity-endpoint /subscriptions/{SubID}/resourceGroups/TestRG/providers/Microsoft.Storage/storageAccounts/s2/blobServices/default/containers/blobcontainer1 --deadletter-identity systemassigned -n {EventSubscriptionName}",
                "az eventgrid event-subscription create -n es1 \\\n    --source-resource-id /subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.EventGrid/topics/topic1\n    --endpoint-type storagequeue \\\n    --endpoint /subscriptions/{SubID}/resourceGroups/TestRG/providers/Microsoft.Storage/storageAccounts/sa1/queueservices/default/queues/q1 \\\n    --storage-queue-msg-ttl 300",
                "az eventgrid event-subscription create -n {EventSubscriptionName} --source-resource-id /subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.EventGrid/topics/topic1 \\\n    --delivery-identity-endpoint-type StorageQueue --delivery-identity systemassigned --delivery-identity-endpoint /subscriptions/{SubID}/resourceGroups/TestRG/providers/Microsoft.Storage/storageAccounts/sa1/queueservices/default/queues/q1 \\\n    --storage-queue-msg-ttl 300",
                "az eventgrid event-subscription create -n es1 \\\n    --source-resource-id /subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.EventGrid/topics/topic1\n    --endpoint-type storagequeue \\\n    --endpoint /subscriptions/{SubID}/resourceGroups/TestRG/providers/Microsoft.Storage/storageAccounts/sa1/queueservices/default/queues/q1 \\\n    --enable-advanced-filtering-on-arrays true"
            ]
        },
        {
            "name": "az eventgrid event-subscription delete",
            "summary": "Delete an event subscription.",
            "syntax": "az eventgrid event-subscription delete --name\n                                       [--source-resource-id]",
            "required_parameters": [
                "--name -n"
            ],
            "optional_parameters": [
                "--source-resource-id"
            ],
            "examples": [
                "az eventgrid event-subscription delete --name es1 \\\n    --source-resource-id /subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.EventGrid/topics/topic1",
                "az eventgrid event-subscription delete --name es1 \\\n    --source-resource-id /subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.EventGrid/domains/domain1/topics/topic1",
                "az eventgrid event-subscription delete --name es1 \\\n    --source-resource-id /subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.EventGrid/domains/domain1",
                "az eventgrid event-subscription delete --name es2 \\\n    --source-resource-id /subscriptions/{SubID}",
                "az eventgrid event-subscription delete --name es3 \\\n    --source-resource-id /subscriptions/{SubID}/resourceGroups/{RG}",
                "az eventgrid event-subscription delete --name es3 \\\n    --source-resource-id /subscriptions/{SubID}/resourceGroups/{RG}/providers/microsoft.storage/storageaccounts/kalsegblob"
            ]
        },
        {
            "name": "az eventgrid event-subscription list",
            "summary": "List event subscriptions.",
            "syntax": "az eventgrid event-subscription list [--location]\n                                     [--odata-query]\n                                     [--resource-group]\n                                     [--source-resource-id]\n                                     [--topic-type-name]",
            "required_parameters": [],
            "optional_parameters": [
                "--location -l",
                "--odata-query",
                "--resource-group -g",
                "--source-resource-id",
                "--topic-type-name"
            ],
            "examples": [
                "az eventgrid event-subscription list --source-resource-id /subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.EventGrid/topics/topic1",
                "az eventgrid event-subscription list --source-resource-id /subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.Storage/storageaccounts/kalsegblob",
                "az eventgrid event-subscription list --source-resource-id /subscriptions/{SubID}",
                "az eventgrid event-subscription list --source-resource-id /subscriptions/{SubID}/resourceGroups/{RG}",
                "az eventgrid event-subscription list --source-resource-id /subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.EventGrid/domains/d1",
                "az eventgrid event-subscription list --source-resource-id /subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.EventGrid/domains/d1/topics/topic1",
                "az eventgrid event-subscription list --topic-type Microsoft.Storage.StorageAccounts --location westus2",
                "az eventgrid event-subscription list --topic-type Microsoft.Storage.StorageAccounts --location westus2 --resource-group {RG}",
                "az eventgrid event-subscription list --location westus2\naz eventgrid event-subscription list --location global",
                "az eventgrid event-subscription list --location westus2 --resource-group {RG}\naz eventgrid event-subscription list --location global --resource-group {RG}",
                "az eventgrid event-subscription list --source-resource-id /subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.EventGrid/domains/d1 --odata-query \"Contains(name, 'XYZ')\"",
                "az eventgrid event-subscription list --source-resource-id /subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.EventGrid/domains/d1 --odata-query \"NOT (name eq 'name1')\""
            ]
        },
        {
            "name": "az eventgrid event-subscription show",
            "summary": "Get the details of an event subscription.",
            "syntax": "az eventgrid event-subscription show --name\n                                     [--include-attrib-secret {false, true}]\n                                     [--include-full-endpoint-url {false, true}]\n                                     [--source-resource-id]",
            "required_parameters": [
                "--name -n"
            ],
            "optional_parameters": [
                "--include-attrib-secret --include-static-delivery-attribute-secret",
                "--include-full-endpoint-url",
                "--source-resource-id"
            ],
            "examples": [
                "az eventgrid event-subscription show --name es1 \\\n    --source-resource-id /subscriptions/{SubID}/resourceGroups/rg1/providers/Microsoft.EventGrid/topics/topic1",
                "az eventgrid event-subscription show --name es2 \\\n    --source-resource-id /subscriptions/{SubID}",
                "az eventgrid event-subscription show --name es3 \\\n    --source-resource-id /subscriptions/{SubID}/resourceGroups/rg1",
                "az eventgrid event-subscription show --name es3 \\\n    --source-resource-id /subscriptions/{SubID}/resourceGroups/rg1/providers/microsoft.storage/storageaccounts/kalsegblob",
                "az eventgrid event-subscription show --name es3 \\\n    --source-resource-id /subscriptions/{SubID}/resourceGroups/rg1 \\\n    --include-static-delivery-attribute-secret"
            ]
        },
        {
            "name": "az eventgrid event-subscription update",
            "summary": "Update an event subscription.",
            "syntax": "az eventgrid event-subscription update --name\n                                       [--add]\n                                       [--advanced-filter]\n                                       [--deadletter-endpoint]\n                                       [--deadletter-identity {systemassigned}]\n                                       [--deadletter-identity-endpoint]\n                                       [--delivery-attribute-mapping]\n                                       [--delivery-identity {systemassigned}]\n                                       [--delivery-identity-endpoint]\n                                       [--delivery-identity-endpoint-type {azurefunction, eventhub, hybridconnection, servicebusqueue, servicebustopic, storagequeue, webhook}]\n                                       [--enable-advanced-filtering-on-arrays {false, true}]\n                                       [--endpoint]\n                                       [--endpoint-type]\n                                       [--force-string]\n                                       [--included-event-types]\n                                       [--labels]\n                                       [--qttl]\n                                       [--remove]\n                                       [--set]\n                                       [--source-resource-id]\n                                       [--subject-begins-with]\n                                       [--subject-ends-with]",
            "required_parameters": [
                "--name -n"
            ],
            "optional_parameters": [
                "--add",
                "--advanced-filter",
                "--deadletter-endpoint",
                "--deadletter-identity",
                "--deadletter-identity-endpoint",
                "--delivery-attribute-mapping",
                "--delivery-identity",
                "--delivery-identity-endpoint",
                "--delivery-identity-endpoint-type",
                "--enable-advanced-filtering-on-arrays --enable-af-arr",
                "--endpoint",
                "--endpoint-type",
                "--force-string",
                "--included-event-types",
                "--labels",
                "--qttl --storage-queue-msg-ttl",
                "--remove",
                "--set",
                "--source-resource-id",
                "--subject-begins-with",
                "--subject-ends-with"
            ],
            "examples": [
                "az eventgrid event-subscription update --name es1 \\\n    --source-resource-id /subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.EventGrid/topics/topic1 \\\n    --endpoint https://contoso.azurewebsites.net/api/f1?code=code",
                "az eventgrid event-subscription update --name es2 \\\n    --source-resource-id /subscriptions/{SubID} \\\n    --subject-ends-with .jpg",
                "az eventgrid event-subscription update --name es3 \\\n    --source-resource-id /subscriptions/{SubID}/resourceGroups/{RG} \\\n    --subject-ends-with .png \\\n    --endpoint https://contoso.azurewebsites.net/api/f1?code=code",
                "az eventgrid event-subscription update --name es3 \\\n    --source-resource-id \"/subscriptions/{SubID}/resourceGroups/{RG}/providers/microsoft.storage/storageaccounts/kalsegblob\" \\\n    --included-event-types Microsoft.Storage.BlobCreated Microsoft.Storage.BlobDeleted",
                "az eventgrid event-subscription update --name es2 \\\n    --source-resource-id \"/subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.Storage/storageaccounts/kalsegblob\" \\\n    --deadletter-endpoint /subscriptions/{SubID}/resourceGroups/TestRG/providers/Microsoft.Storage/storageAccounts/sa1/blobServices/default/containers/blobcontainer1",
                "az eventgrid event-subscription update --name es3 \\\n    --source-resource-id \"/subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.Storage/storageaccounts/s1\" \\\n    --endpoint https://contoso.azurewebsites.net/api/f1?code=code\n    --advanced-filter data.blobType StringIn BlockBlob\n    --advanced-filter data.url StringBeginsWith https://myaccount.blob.core.windows.net",
                "az eventgrid event-subscription update --name es2 \\\n    --source-resource-id \"/subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.Storage/storageaccounts/kalsegblob\" \\\n    --storage-queue-msg-ttl 300",
                "az eventgrid event-subscription update --name es2 \\\n    --source-resource-id \"/subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.Storage/storageaccounts/kalsegblob\" \\\n    --enable-advanced-filtering-on-arrays true"
            ]
        }
    ]
}