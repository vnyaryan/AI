{
    "command_group": "az acr task",
    "description": "Manage a collection of steps for building, testing and OS & Framework patching container images using Azure Container Registries.",
    "status": "GA",
    "commands": [
        {
            "name": "az acr task cancel-run",
            "summary": "Cancel a specified run of an Azure Container Registry.",
            "syntax": "az acr task cancel-run --registry\n                       --run-id\n                       [--resource-group]",
            "required_parameters": [
                "--registry -r",
                "--run-id"
            ],
            "optional_parameters": [
                "--resource-group -g"
            ],
            "examples": [
                "az acr task cancel-run -r myregistry --run-id runId"
            ]
        },
        {
            "name": "az acr task create",
            "summary": "Create a series of steps for building, testing and OS & Framework patching containers. Tasks support triggers from git commits and base image updates.",
            "syntax": "az acr task create --name\n                   --registry\n                   [--agent-pool]\n                   [--arg]\n                   [--assign-identity]\n                   [--auth-mode {Default, None}]\n                   [--base-image-trigger-enabled {false, true}]\n                   [--base-image-trigger-name]\n                   [--base-image-trigger-type {All, Runtime}]\n                   [--cmd]\n                   [--commit-trigger-enabled {false, true}]\n                   [--context]\n                   [--cpu]\n                   [--file]\n                   [--git-access-token]\n                   [--image]\n                   [--is-system-task]\n                   [--log-template]\n                   [--no-cache {false, true}]\n                   [--no-push {false, true}]\n                   [--platform]\n                   [--pull-request-trigger-enabled {false, true}]\n                   [--resource-group]\n                   [--schedule]\n                   [--secret-arg]\n                   [--set]\n                   [--set-secret]\n                   [--source-trigger-name]\n                   [--status {Disabled, Enabled}]\n                   [--target]\n                   [--timeout]\n                   [--update-trigger-endpoint]\n                   [--update-trigger-payload-type {Default, Token}]\n                   [--values]",
            "required_parameters": [
                "--name -n",
                "--registry -r"
            ],
            "optional_parameters": [
                "--agent-pool",
                "--arg",
                "--assign-identity",
                "--auth-mode",
                "--base-image-trigger-enabled",
                "--base-image-trigger-name",
                "--base-image-trigger-type",
                "--cmd",
                "--commit-trigger-enabled",
                "--context -c",
                "--cpu",
                "--file -f",
                "--git-access-token",
                "--image -t",
                "--is-system-task",
                "--log-template",
                "--no-cache",
                "--no-push",
                "--platform",
                "--pull-request-trigger-enabled",
                "--resource-group -g",
                "--schedule",
                "--secret-arg",
                "--set",
                "--set-secret",
                "--source-trigger-name",
                "--status",
                "--target",
                "--timeout",
                "--update-trigger-endpoint",
                "--update-trigger-payload-type",
                "--values"
            ],
            "examples": [
                "az acr task create -n hello-world -r myregistry --cmd '$Registry/myimage' -c /dev/null",
                "cat task.yaml | az acr task create -n hello-world -r myregistry -f - -c /dev/null \\\n    --schedule \"0 */1 * * *\"\naz acr task create -n hello-world -r myregistry -f - -c /dev/null --schedule \"0 */1 * * *\"",
                "az acr task create -t hello-world:{{.Run.ID}} -n hello-world -r myregistry \\\n    -c https://github.com/Azure/acr-builder.git -f Dockerfile \\\n    --commit-trigger-enabled false --base-image-trigger-enabled false \\\n    --arg DOCKER_CLI_BASE_IMAGE=docker:18.03.0-ce-git",
                "az acr task create -t hello-world:{{.Run.ID}} -n hello-world -r myregistry \\\n    -c https://msazure.visualstudio.com/DefaultCollection/Project/_git/Repo#Branch:Folder \\\n    -f Dockerfile --git-access-token <Personal Access Token> --platform linux/arm/v7",
                "az acr task create -t hello-world:{{.Run.ID}} -n hello-world -r myregistry  -f Dockerfile \\\n    --no-push true --auth-mode None -c https://github.com/Azure-Samples/acr-build-helloworld-node.git \\\n    --pull-request-trigger-enabled true --git-access-token 000000000000000000000000000000000",
                "az acr task create -t acb:{{.Run.ID}} -n acb-win -r myregistry \\\n    -c https://github.com/Azure/acr-builder.git -f Windows.Dockerfile \\\n    --commit-trigger-enabled false --platform Windows/amd64",
                "az acr task create -t hello-world:{{.Run.ID}} -n hello-world -r myregistry \\\n    --pull-request-trigger-enabled true --schedule \"dailyTimer:0 12 * * Mon-Fri\" \\\n    -c https://github.com/Azure-Samples/acr-tasks.git#:multipleRegistries -f testtask.yaml \\\n    --assign-identity [system] \"/subscriptions/<subscriptionId>/resourcegroups/<myResourceGroup>/providers/Microsoft.ManagedIdentity/userAssignedIdentities/<myUserAssignedIdentitiy>\""
            ]
        },
        {
            "name": "az acr task delete",
            "summary": "Delete a task from an Azure Container Registry.",
            "syntax": "az acr task delete --name\n                   --registry\n                   [--resource-group]\n                   [--yes]",
            "required_parameters": [
                "--name -n",
                "--registry -r"
            ],
            "optional_parameters": [
                "--resource-group -g",
                "--yes -y"
            ],
            "examples": [
                "az acr task delete -n MyTask -r myregistry"
            ]
        },
        {
            "name": "az acr task list",
            "summary": "List the tasks for an Azure Container Registry.",
            "syntax": "az acr task list --registry\n                 [--resource-group]",
            "required_parameters": [
                "--registry -r"
            ],
            "optional_parameters": [
                "--resource-group -g"
            ],
            "examples": [
                "az acr task list -r myregistry -o table"
            ]
        },
        {
            "name": "az acr task list-runs",
            "summary": "List all of the executed runs for an Azure Container Registry, with the ability to filter by a specific Task.",
            "syntax": "az acr task list-runs --registry\n                      [--image]\n                      [--name]\n                      [--resource-group]\n                      [--run-status {Canceled, Error, Failed, Queued, Running, Started, Succeeded, Timeout}]\n                      [--top]",
            "required_parameters": [
                "--registry -r"
            ],
            "optional_parameters": [
                "--image -t",
                "--name -n",
                "--resource-group -g",
                "--run-status",
                "--top"
            ],
            "examples": [
                "az acr task list-runs -r myregistry -o table",
                "az acr task list-runs -r myregistry -n MyTask -o table",
                "az acr task list-runs -r myregistry --run-status Succeeded --top 10 -o table",
                "az acr task list-runs -r myregistry --image hello-world -o table"
            ]
        },
        {
            "name": "az acr task logs",
            "summary": "Show logs for a particular run. If no run-id is supplied, show logs for the last created run.",
            "syntax": "az acr task logs --registry\n                 [--image]\n                 [--name]\n                 [--no-format]\n                 [--resource-group]\n                 [--run-id]",
            "required_parameters": [
                "--registry -r"
            ],
            "optional_parameters": [
                "--image -t",
                "--name -n",
                "--no-format",
                "--resource-group -g",
                "--run-id"
            ],
            "examples": [
                "az acr task logs -r myregistry",
                "az acr task logs -r myregistry -n MyTask",
                "az acr task logs -r myregistry --run-id runId",
                "az acr task logs -r myregistry --image hello-world"
            ]
        },
        {
            "name": "az acr task run",
            "summary": "Manually trigger a task that might otherwise be waiting for git commits or base image update triggers.",
            "syntax": "az acr task run --name\n                --registry\n                [--agent-pool]\n                [--arg]\n                [--context]\n                [--file]\n                [--log-template]\n                [--no-format]\n                [--no-logs]\n                [--no-wait]\n                [--resource-group]\n                [--secret-arg]\n                [--set]\n                [--set-secret]\n                [--target]\n                [--update-trigger-token]",
            "required_parameters": [
                "--name -n",
                "--registry -r"
            ],
            "optional_parameters": [
                "--agent-pool",
                "--arg",
                "--context -c",
                "--file -f",
                "--log-template",
                "--no-format",
                "--no-logs",
                "--no-wait",
                "--resource-group -g",
                "--secret-arg",
                "--set",
                "--set-secret",
                "--target",
                "--update-trigger-token"
            ],
            "examples": [
                "az acr task run -n MyTask -r myregistry",
                "az acr task run -n MyTask -r myregistry -c https://github.com/Azure-Samples/acr-build-helloworld-node.git -f Dockerfile",
                "az acr task run -n MyTask -r myregistry -c . -f Dockerfile",
                "az acr task run -n MyTask -r myregistry --arg DOCKER_CLI_BASE_IMAGE=docker:18.03.0-ce-git"
            ]
        },
        {
            "name": "az acr task show",
            "summary": "Get the properties of a named task for an Azure Container Registry.",
            "syntax": "az acr task show --name\n                 --registry\n                 [--resource-group]\n                 [--with-secure-properties]",
            "required_parameters": [
                "--name -n",
                "--registry -r"
            ],
            "optional_parameters": [
                "--resource-group -g",
                "--with-secure-properties"
            ],
            "examples": [
                "az acr task show -n MyTask -r myregistry -o table",
                "az acr task show -n MyTask -r myregistry --with-secure-properties"
            ]
        },
        {
            "name": "az acr task show-run",
            "summary": "Get the properties of a specified run of an Azure Container Registry Task.",
            "syntax": "az acr task show-run --registry\n                     --run-id\n                     [--resource-group]",
            "required_parameters": [
                "--registry -r",
                "--run-id"
            ],
            "optional_parameters": [
                "--resource-group -g"
            ],
            "examples": [
                "az acr task show-run -r myregistry --run-id runId -o table"
            ]
        },
        {
            "name": "az acr task update",
            "summary": "Update a task for an Azure Container Registry.",
            "syntax": "az acr task update --name\n                   --registry\n                   [--agent-pool]\n                   [--arg]\n                   [--auth-mode {Default, None}]\n                   [--base-image-trigger-enabled {false, true}]\n                   [--base-image-trigger-type {All, Runtime}]\n                   [--cmd]\n                   [--commit-trigger-enabled {false, true}]\n                   [--context]\n                   [--cpu]\n                   [--file]\n                   [--git-access-token]\n                   [--image]\n                   [--log-template]\n                   [--no-cache {false, true}]\n                   [--no-push {false, true}]\n                   [--platform]\n                   [--pull-request-trigger-enabled {false, true}]\n                   [--resource-group]\n                   [--secret-arg]\n                   [--set]\n                   [--set-secret]\n                   [--status {Disabled, Enabled}]\n                   [--target]\n                   [--timeout]\n                   [--update-trigger-endpoint]\n                   [--update-trigger-payload-type {Default, Token}]\n                   [--values]",
            "required_parameters": [
                "--name -n",
                "--registry -r"
            ],
            "optional_parameters": [
                "--agent-pool",
                "--arg",
                "--auth-mode",
                "--base-image-trigger-enabled",
                "--base-image-trigger-type",
                "--cmd",
                "--commit-trigger-enabled",
                "--context -c",
                "--cpu",
                "--file -f",
                "--git-access-token",
                "--image -t",
                "--log-template",
                "--no-cache",
                "--no-push",
                "--platform",
                "--pull-request-trigger-enabled",
                "--resource-group -g",
                "--secret-arg",
                "--set",
                "--set-secret",
                "--status",
                "--target",
                "--timeout",
                "--update-trigger-endpoint",
                "--update-trigger-payload-type",
                "--values"
            ],
            "examples": [
                "az acr task update -n MyTask -r myregistry --base-image-trigger-type All --status Disabled",
                "az acr task update -n MyTask -r myregistry --platform Windows",
                "az acr task update -n hello-world -r myregistry -f Dockerfile \\\n    --commit-trigger-enabled false --pull-request-trigger-enabled true \\\n    -c https://msazure.visualstudio.com/DefaultCollection/Project/_git/Repo#Branch:Folder",
                "az acr task update --image MyImage --name MyTask --registry myregistry \\\n    --context https://github.com/Azure-Samples/acr-build-helloworld-node.git"
            ]
        },
        {
            "name": "az acr task update-run",
            "summary": "Patch the run properties of an Azure Container Registry Task.",
            "syntax": "az acr task update-run --registry\n                       --run-id\n                       [--no-archive {false, true}]\n                       [--resource-group]",
            "required_parameters": [
                "--registry -r",
                "--run-id"
            ],
            "optional_parameters": [
                "--no-archive",
                "--resource-group -g"
            ],
            "examples": [
                "az acr task update-run -r myregistry --run-id runId --no-archive false"
            ]
        }
    ]
}